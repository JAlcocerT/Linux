---
title: "Linux made easy"
author: "JAT"
date: "Updated on: `r format(Sys.time(), '%d %B %Y')`"
output:
  html_document:
    css: styles.css
    toc: true
    toc_float: true
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, echo=FALSE} 
a = knitr::asis_output("\U2714")
```

# Intro

Web version of the outputs generated by the codes posted on <https://github.com/reisikei/Linux>

Please feel free to copy, modify, distribute and suggest any further improvements on them.

Due to the increasing importance of containerized application running on Docker, there will be several mentions on this page to my guide on docker: <https://reisikei.github.io/docker/>



# Debian (Ubuntu) based distros:

(Tested with Ubuntu, Elementary OS, Zorin OS or Raspbian OS were applicable)




## Regular apps installations

Ever wondered about using linux as a regular OS, but afraid of making tedious installations of all your favorite programs, even games?

Those time consuming tasks can be avoided simpky with the use of the commands [on this repo](https://github.com/reisikei/Linux/blob/main/Ubuntu%20installations%20bash).


The list includes, among others: VLC, blender, photoscape, octave, discord, steam and virtualbox - ALL WITH A SINGLE COMMAND.

Option 1:

If you would like to install all the programs listed there:

```
wget  -cO - https://raw.githubusercontent.com/reisikei/Linux/main/Ubuntu%20installations%20bash > apps-install-bash.sh && chmod 775 apps-install-bash.sh && sudo ./apps-install-bash.sh
```


Option 2:

If you are interested only in a partial installation of all the apps contained in the mentioned script, you can download it and delete the undesired parts before executing it with the following commands:


```
wget  -cO - https://raw.githubusercontent.com/reisikei/Linux/main/Ubuntu%20installations%20bash > apps-install-bash.sh
```

edit the file, if desired through the command line with:
```
sudo nano apps-install-bash.sh

```



##### Last time tested on Sept 2021 `r a`

## Secure your distro

### Schedule Crontab tasks

Open crontab:

```
crontab -e
```

Update it every midnight and every restart:

```
0 0 * * * sudo apt update && sudo apt upgrade
@reboot sudo apt update && sudo apt upgrade
```

If your script isn't executing, check the system log for cron events:
grep cron /var/log/syslog

If you'd wish to view your scheduled tasks without editing you can use the command:

```
crontab -l 
```




### Setup fail2ban
 
 ```
 #fail2ban
sudo apt-get install -y \
apt-transport-https \
ca-certificates \
curl \
gnupg2 \
vim \
fail2ban \
ntfs-3g
```

sudo nano /etc/fail2ban/jail.conf

```
sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local && #copying it to edit
sudo nano /etc/fail2ban/jail.local
```

Add this to the file to ban for 24h if retry +3 times:

```
bantime = 86400
port    = ssh
logpath = %(sshd_log)s
backend = %(sshd_backend)s
maxretry = 3
```

```
sudo service fail2ban restart &&
sudo nano /var/log/fail2ban.log
 ```
 
 
 

### Firewall setup (ufw)
 
sudo ss -tupln #ports in use

```
sudo apt install ufw && #ufw
sudo ufw status &&
sudo ufw allow 22 && #allow ssh
sudo ufw enable &&
sudo ufw status &&
sudo ufw reload #restart it
```

sudo ufw allow 717 #example to allow conexion

Typical ports that are used: 22 for ssh, 443 for https, 80 for http

### Create users

```
#simple:
useradd pruebecita
#with sudo rights:
useradd -g users -G sudo -s /bin/bash -m -c "Your name" user_desired_name
#without sudo rights:
useradd -g user -s /bin/bash -m -c "Your name" user_desired_name
```

To make the home folders only visible but the specific users, just do:

```
chmod -R go-rwx /home/user_name_1
chmod -R go-rwx /home/user_name_2
chmod -R go-rwx /home/user_name_3

```

##### Last time tested on Oct 2021 `r a`

### Check devices in local network

```
sudo apt install nast nmap \
sudo nast -m
```

or

```
nmap -sP 192.168.1.0/24 | grep "scan"
```

## Create custom aliases 
 
Lets edit this file:

```
nano ~/.bash_aliases
```

Add this line to know the Rpi temperature by typing 'temp' on the terminal:
```
alias temp='/opt/vc/bin/vcgencmd measure_temp' ### TEMP RPi
```

Add this line to know your public ip address by typing myip on the terminal:
```
alias myip='curl ipinfo.io/ip' #public ip address
```
Use this command to be able to use the new alias already in the current session
```
source ~/.bashrc
```


## Install GIT and sync your repos
 
 ```
 sudo apt install git &&
 git clone https://github.com/reisikei/RPi.git &&
 cd RPi &&
 git pull #to make sure its up to date (a cron task could be scheduled)
```


## VPN Setup



### Tailscale

```
sudo apt-get install apt-transport-https &&
curl -fsSL https://pkgs.tailscale.com/stable/raspbian/buster.gpg | sudo apt-key add - &&
curl -fsSL https://pkgs.tailscale.com/stable/raspbian/buster.list | sudo tee /etc/apt/sources.list.d/tailscale.list &&
sudo apt-get update &&
sudo apt-get install tailscale &&
sudo tailscale up &&
tailscale ip -4 #get the ip 

#sudo tailscale logout
#sudo tailscale down
 ```
 
#To force all the traffic to go through the Rpi, Port forwarding is needed:

```
echo 'net.ipv4.ip_forward = 1' | sudo tee -a /etc/sysctl.conf &&
echo 'net.ipv6.conf.all.forwarding = 1' | sudo tee -a /etc/sysctl.conf &&
sudo sysctl -p /etc/sysctl.conf &&
sudo tailscale down
```

With this final command, the RPi will be an exit node:

```
sudo tailscale up --advertise-exit-node
```

### Wireguard

### OpenVPN


## Install Docker

To install docker, docker compose and portainer, simply copy the following code chunks in your terminal:


Option 1:

```
### INSTALL DOCKER

sudo apt update
sudo apt install apt-transport-https ca-certificates curl software-properties-common -y
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu bionic stable"

sudo apt update -y

apt-cache policy docker-ce
sudo apt install docker-ce

sudo systemctl status docker

## INSTALL DOCKER COMPOSE

sudo apt install docker-compose -y

## INSTALL PORTAINER
docker run -d -p 8000:8000 -p 9000:9000 --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce

#Test that docker works with this image:
#docker run hello-world
```

Option 2:

On [this github repository](https://github.com/reisikei/docker/blob/main/1%20Docker%20%26%20%20Docker%20compose%20%26%20Portainer), there is the possibility to download and install directly a bash program with all the previous commands by typing only this on the terminal:

```
wget  -cO - https://raw.githubusercontent.com/reisikei/docker/main/1%20Docker%20%26%20%20Docker%20compose%20%26%20Portainer > docker_install.sh && chmod 775 docker_install.sh && sudo ./docker_install.sh
```

##### Last time tested on Sept 2021 `r a`

### Torrents within Docker

#### Qbittorrent

#### Transmission Telegram Bot

#### Nextcloud

In linux systems it is as simple as running the following commands in the terminal after having installed docker:

```
sudo docker run -d -v ~/nextcloud:/var/www/html -p 8080:80 --name nextcloud_container nextcloud 

```

Remember to update the list of trusted domains so that other devices can log, we can see the current list with:

```
sudo docker exec --user www-data nextcloud_container php occ config:system:get trusted_domains
```

To add a new domain/ internal ip, simply:

```
sudo docker exec --user www-data nextcloud_container php occ config:system:set trusted_domains 7 --value 192.168.1.30:8080

```

You can check your device internal IP adress with:

```
hostname -I
```

To access nextcloud while being out of home, simply configure your VPN, for example with tailscale, and add the internal Ip address assign by tail scale as shown two commands before.

##### Last time tested on Sept 2021 `r a`

## RPi projects


The Raspberry Pi is a tiny and affordable computer (ARM based) that you can use to learn programming through fun, practical projects. 

It can run Linux distros like: Debian, OpenMediaVault or most commonly Raspbian OS.

Check out some recommended setups and projects on [my repo](https://reisikei.github.io/RPi/)


# Arch based distros:

(To be tested with RebornOS)

