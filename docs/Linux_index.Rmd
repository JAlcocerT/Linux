---
title: "Linux made easy"
author: "JAT"
date: "`r format(Sys.time(), '%d %B %Y')`"
output:
  html_document:
    css: styles.css
    toc: true
    toc_float: true
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


# Debian (Ubuntu) based distros:

(Tested with Ubuntu, Elementary OS or Raspbian OS were applicable)

Web version of the outputs generated by the codes posted on <https://github.com/reisikei/Linux>

Please feel free to copy, modify, distribute and suggest any further improvements on them.




## Regular apps installations

Ever wondered about using linux as a regular OS, but afraid of making tedious installations of all your favorite programs, even games?

Those time consuming tasks can be avoided simpky with the use of the commands [on this repo](https://github.com/reisikei/Linux/blob/main/Ubuntu%20installations%20bash).


The list includes, among others: VLC, blender, photoscape, octave, discord, steam and virtualbox - ALL WITH A SINGLE COMMAND.

Option 1:

If you would like to install all the programs listed there:

```
wget  -cO - https://raw.githubusercontent.com/reisikei/Linux/main/Ubuntu%20installations%20bash > apps-install-bash.sh && chmod 775 docker-install-bash.sh && sudo ./docker-install-bash.sh
```


Option 2:

If you are interested only in a partial installation of all the apps contained in the mentioned script, you can download it and delete the undesired parts before executing it with the following commands:


```
wget  -cO - https://raw.githubusercontent.com/reisikei/Linux/main/Ubuntu%20installations%20bash > apps-install-bash.sh
```


```{r, echo=FALSE} 
knitr::asis_output("Last time tested on Sept 2021 \U2714")
```


## Schedule Crontab tasks

Open crontab:

```
crontab -e
```

Update it every midnight and every restart:

```
0 0 * * * sudo apt update && sudo apt upgrade
@reboot sudo apt update && sudo apt upgrade
```

If your script isn't executing, check the system log for cron events:
grep cron /var/log/syslog

If you'd wish to view your scheduled tasks without editing you can use the command:

```
crontab -l 
```




## Setup fail2ban
 
 ```
 #fail2ban
sudo apt-get install -y \
apt-transport-https \
ca-certificates \
curl \
gnupg2 \
vim \
fail2ban \
ntfs-3g
```

#sudo nano /etc/fail2ban/jail.conf
```
sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local && #copying it to edit
sudo nano /etc/fail2ban/jail.local
```

Add this to the file to ban for 24h if retry +3 times:

```
bantime = 86400
port    = ssh
logpath = %(sshd_log)s
backend = %(sshd_backend)s
maxretry = 3
```

```
sudo service fail2ban restart &&
sudo nano /var/log/fail2ban.log
 ```
 
 
 
 
 
 
## Firewall setup (ufw)
 
sudo ss -tupln #ports in use

```
sudo apt install ufw && #ufw
sudo ufw status &&
sudo ufw allow 22 && #allow ssh
sudo ufw enable &&
sudo ufw status &&
sudo ufw reload #restart it
```

sudo ufw allow 717 #example to allow conexion

Typical ports that are used: 22 for ssh, 443 for https, 80 for http



## Create custom aliases 
 
Lets edit this file:

```
nano ~/.bash_aliases
```

Add this line to know the Rpi temperature by typing 'temp' on the terminal:
```
alias temp='/opt/vc/bin/vcgencmd measure_temp' ### TEMP RPi
```

Add this line to know your public ip address by typing myip on the terminal:
```
alias myip='curl ipinfo.io/ip' #public ip address
```
Use this command to be able to use the new alias already in the current session
```
source ~/.bashrc
```


## Install GIT and sync your repos
 
 ```
 sudo apt install git &&
 git clone https://github.com/reisikei/RPi.git &&
 cd RPi &&
 git pull #to make sure its up to date (a cron task could be scheduled)
```


## VPN Setup

### Tailscale

```
sudo apt-get install apt-transport-https &&
curl -fsSL https://pkgs.tailscale.com/stable/raspbian/buster.gpg | sudo apt-key add - &&
curl -fsSL https://pkgs.tailscale.com/stable/raspbian/buster.list | sudo tee /etc/apt/sources.list.d/tailscale.list &&
sudo apt-get update &&
sudo apt-get install tailscale &&
sudo tailscale up &&
tailscale ip -4 #get the ip 

#sudo tailscale logout
#sudo tailscale down
 ```
 
#To force all the traffic to go through the Rpi, Port forwarding is needed:

```
echo 'net.ipv4.ip_forward = 1' | sudo tee -a /etc/sysctl.conf &&
echo 'net.ipv6.conf.all.forwarding = 1' | sudo tee -a /etc/sysctl.conf &&
sudo sysctl -p /etc/sysctl.conf &&
sudo tailscale down
```

With this final command, the RPi will be an exit node:

```
sudo tailscale up --advertise-exit-node
sudo tailscale up --exit-node=<exit-node-ip>
```


## Install Docker

To install docker, simply copy the following code chunks in your terminal:


Option 1:

```
sudo apt-get install \
    apt-transport-https \
    ca-certificates \
    curl \
    gnupg \
    lsb-release /-y
    &&
  curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
 &&
 echo \
  "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \
  $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
 && 
 sudo apt-get update \
 sudo apt-get install docker-ce docker-ce-cli containerd.io -y \
 sudo docker run hello-world
```

To install docker-compose and a test container, run the following:

```
sudo curl -L "https://github.com/docker/compose/releases/download/1.26.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
sudo usermod -aG docker $USER
```

Option 2:

On [this github repository](https://github.com/reisikei/Linux/blob/main/Ubuntu%20docker%20only), there is the possibility to download and install directly a bash program with all the previous commands by typing only this on the terminal:

```
wget  -cO - https://raw.githubusercontent.com/reisikei/Linux/main/Ubuntu%20docker%20only > docker-install-bash.sh && chmod 775 docker-install-bash.sh && sudo ./docker-install-bash.sh
```


### Torrents within Docker

#### Qbittorrent

#### Transmission Telegram Bot



## RPi projects

<https://reisikei.github.io/RPi/>


# Arch based distros:

(Tested with RebornOS)

