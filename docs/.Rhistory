elcash <- read_html("https://explorer.electriccash.global/")
elcash_data<- elcash %>% #and then
html_nodes(".lead") %>%
html_text()
elcash_data[9]
stri_sub(elcash_data[9],2,4)
elcash_market_cap<-as.integer(stri_sub(elcash_data[9],2,4))*10e5
btcv <- read_html("https://explorer.bitcoinvault.global/")
btcv_data<- btcv %>% #and then
html_nodes(".lead") %>%
html_text()
#
# length(btcv_data)
#
#
# for (i in seq_len(length(btcv_data))){
# print(btcv_data[i])
# }
#
# for (i in 1:length(btcv_data)){
# print(btcv_data[i])
# }
#for (i in length(btcv_data){
for (i in 1:length(btcv_data)){
if(grepl("BTCV", btcv_data[i], fixed = TRUE)==TRUE){
pos<-i}
}
btcv_data[11]
stri_sub(btcv_data[11],2,4)
btcv_market_cap<-as.integer(stri_sub(btcv_data[11],2,4))*10e5
btcv_market_cap<-  250500000
elcash_market_cap<-166880000
#PULL top 100 to 200 from coinmarketcap
symbols<-all$symbol[101:200]
cap<- rep(0, length(symbols))
coins<- rep(0, length(symbols))
price<- rep(0, length(symbols))
rank<-rep(101:200)
marketcap<- data.frame(symbols, cap,coins,price,rank)
row<-1
#head(dataf[, (colnames(dataf) %in% c('Depr1', 'Depr2','Depr4', 'Depr7'))])
#sym<-get_crypto_quotes(symbol = "BTC")
for(i in symbols) {
#print(i)
try(sym<-get_crypto_quotes(symbol = i))
marketcap$coins[row]<-sym[, c(9)]
marketcap$price[row]<-sym[, c(16)]
#sym2<-sym[, c(9, 16)]
#marketcap$cap[row]<-sym$total_supply*sym$price
#marketcap$cap[row]<-sym[, c(9)]*sym[, c(16)]
#education[c(10:21),c(2,6:7)]
#marketcap[c(row),c(cap)]<-(marketcap$coins[row])*marketcap$price[row]
marketcap$cap[row]<-sym[, c(9)]*sym[, c(16)]
#marketcap$cap[row]<-prettyNum(sym[, c(9)]*sym[, c(16)],big.mark=",",scientific=FALSE)
Sys.sleep(2.5)
row<-row+1
}
rank_btcv<-0
rank_elcash<-0
#Loop to find the position in marketcap of both coins
for(row in 1:nrow(marketcap)) {
#print(marketcap$cap[row])
if(marketcap$cap[row]>btcv_market_cap){
rank_btcv<-rank_btcv+1}
if(marketcap$cap[row]>elcash_market_cap){
rank_elcash<-rank_elcash+1}
}
rank_btcv<-rank_btcv+101
rank_elcash<-rank_elcash+101
print(rank_btcv)
print(rank_elcash)
install.packages("rJava")
Sys.setenv(JAVA_HOME='C:\\Program Files\\Java\\jre7') # for 64-bit version
Sys.setenv(JAVA_HOME='C:\\Program Files (x86)\\Java\\jre1.8.0_291')
library(rJava)
txt <- paste("INSERT INTO analysis_data.ranktable(DATE, BTCV_RANK, ELCASH_RANK) VALUES('",10,"','",50,"','",60,"';")
print(txt)
paste("INSERT INTO analysis_data.ranktable(DATE, BTCV_RANK, ELCASH_RANK) VALUES(',10,',',50,',',60,';")
paste("INSERT INTO analysis_data.ranktable(DATE, BTCV_RANK, ELCASH_RANK) VALUES('10','50','60';")
paste("INSERT INTO analysis_data.ranktable(DATE, BTCV_RANK, ELCASH_RANK) VALUES('10','50','60')")
library(readxl)
library(xlsx)
library(writexl)
# set number of rows
N <- 2500
# create random dfs
my_df_A <- data.frame(y = seq(1,N),
z = rep('a',N))
# set files
my_file_1 <- 'data/temp_writexl.xlsx'
my_file_2 <- 'data/temp_xlsx.xlsx'
# test export
time_write_writexl <- system.time(write_xlsx(x = my_df_A,
path = my_file_1))
my_file_1 <- '/temp_writexl.xlsx'
my_file_2 <- '/temp_xlsx.xlsx'
# test export
time_write_writexl <- system.time(write_xlsx(x = my_df_A,
path = my_file_1))
# test export
time_write_writexl <- write_xlsx(x = my_df_A,path = my_file_1)
my_file_1 <- 'temp_writexl.xlsx'
my_file_2 <- 'temp_xlsx.xlsx'
# test export
time_write_writexl <- write_xlsx(x = my_df_A,path = my_file_1)
# read excel file
my_f <- afedR::get_data_file('C:/Users/jesus.alcocer/Cloud Best sp. z o.o/BI Team - General/BTCV/Data/Price weekly - Copy.xlsx')
library(readxl)
library(writexl)
#read the current file
# read excel file
my_f <- afedR::get_data_file('C:/Users/jesus.alcocer/Cloud Best sp. z o.o/BI Team - General/BTCV/Data/Price weekly - Copy.xlsx')
previous_excel <- read_excel('C:/Users/jesus.alcocer/Cloud Best sp. z o.o/BI Team - General/BTCV/Data/Price weekly - Copy.xlsx', sheet = 'Btcv price')
View(previous_excel)
rm(previous_excel)
path='C:/Users/jesus.alcocer/Cloud Best sp. z o.o/BI Team - General/BTCV/Data/'
file='Price weekly - Copy.xlsx'
previous_excel <- read_excel(paste(path,file), sheet = 'Btcv price')
paste(path,file)
previous_excel <- read_excel('C:/Users/jesus.alcocer/Cloud Best sp. z o.o/BI Team - General/BTCV/Data/Price weekly - Copy.xlsx', sheet = 'Btcv price')
paste(path,file)
'C:/Users/jesus.alcocer/Cloud Best sp. z o.o/BI Team - General/BTCV/Data/Price weekly - Copy.xlsx'
paste(path,file,"")
paste(path,file,sep="")
rm(previous_excel)
previous_excel <- read_excel(paste(path,file,sep=""), sheet = 'Btcv price')
View(previous_excel)
df<-data.frame("hi","bye")
names(df)<-c("hello","goodbye")
de<-data.frame("hola","ciao")
names(de)<-c("hello","goodbye")
newdf <- rbind(df, de)
newdf
View(previous_excel)
View(previous_excel)
View(marketcap)
View(btcv)
new_info<-data.frame("2021-07-28","100000","3","300","5000","500",rank_btcv,"0")
names(new_info)<-c("Date","Price ($)","BTC price ($)","BTCV/BTC price ","Coins in circulation","Market cap","Market cap rank","average 7 days volume")
View(new_info)
new_excel <- rbind(previous_excel, new_info)
names(previous_excel)
paste(names(previous_excel),sep=",")
paste(names(new_info),sep=",")
names(new_info)<-c("Date","Price ($)","BTC price ($)","BTCV/BTC price","Coins in circulation","Market cap","Market cap rank","average 7 days volume")
new_excel <- rbind(previous_excel, new_info)
View(new_excel)
new_excel
View(new_excel)
new_excel<-new_excel[order(new_excel$Date),]
View(new_excel)
new_excel<-new_excel[order(new_excel$Date,desc),]
new_excel<-new_excel[desc(new_excel$Date),]
View(new_excel)
new_excel<-new_excel[asc(new_excel$Date),]
new_excel<-new_excel[order(-new_excel$Date),]
new_excel<-new_excel[order(new_excel$Date),]
new_excel<-new_excel[sort(new_excel$Date),]
new_excel<-new_excel[order(new_excel$Date),]
new_excel<-new_excel[order(-new_excel$Date),]
new_excel<-new_excel[order(new_excel$Date),]
View(new_excel)
Sys.Date()
new_info<-data.frame(Sys.Date(),"100000","3","300","5000","500",rank_btcv,"0")
View(new_info)
btcv_data
as.integer(stri_sub(btcv_data[10],2,4))*10e5
btcv_data[10]
(stri_sub(btcv_data[10],1,2))
as.integer(stri_sub(btcv_data[10],4,6))
as.integer(stri_sub(btcv_data[10],8,10))
btcv_coins<-as.integer(stri_sub(btcv_data[10],1,2))*10e6 + as.integer(stri_sub(btcv_data[10],4,6))*10e3 + as.integer(stri_sub(btcv_data[10],8,10))
new_info<-data.frame("hola","ciao")
new_info<-data.frame(Sys.Date(),"0","0",btcv_coins,"0",btcv_market_cap,rank_btcv,"0")
names(new_info)<-c("Date","Price ($)","BTC price ($)","BTCV/BTC price","Coins in circulation","Market cap","Market cap rank","average 7 days volume")
new_info
View(new_info)
new_info<-data.frame("hola","ciao")
new_info<-data.frame(Sys.Date(),"0","0","0",btcv_coins,"0",btcv_market_cap,rank_btcv,"0")
names(new_info)<-c("Date","Price ($)","BTC price ($)","BTCV/BTC price","Coins in circulation","Market cap","Market cap rank","average 7 days volume")
View(new_info)
new_info<-data.frame("hola","ciao")
new_info<-data.frame(Sys.Date(),"0","0","0",btcv_coins,btcv_market_cap,rank_btcv,"0")
names(new_info)<-c("Date","Price ($)","BTC price ($)","BTCV/BTC price","Coins in circulation","Market cap","Market cap rank","average 7 days volume")
View(new_info)
new_excel<-new_excel[order(new_excel$Date),]
# test export
time_write_writexl <- write_xlsx(x = new_excel, path = paste(path,file,sep=""))
# test export
time_write_writexl <- write_xlsx(x = new_excel, path = paste(path,file,sep=""), sheet='Btcv price')
#install.packages("coinmarketcapr")
library(coinmarketcapr)
# install.packages("devtools")
#devtools::install_github("amrrs/coinmarketcapr")
key<-'515ee143-4929-4b57-8c9f-a033dd7e22ab'
coinmarketcapr::setup(key)
all<-get_crypto_map()
all<-all[order(all$rank),]
#btcvv<-get_crypto_quotes(symbol = "BTCV")
#BTCV marketcap
#btcvv$market_cap<-btcvv$total_supply*btcvv$price
#prettyNum(btcvv$market_cap,big.mark=",",scientific=FALSE)
library(tidyverse)
library(XML)
library(rvest)
#install.packages("htmltools")
#install.packages("rvest")
#install.packages("stringi")
library(htmltools)
#library(rvest)
library(dplyr)
library(stringi)
#packageDescription("rvest")
#install.packages('xml2')
#library('xml2')
#lego_movie <- html("http://www.imdb.com/title/tt1490017/")
elcash <- read_html("https://explorer.electriccash.global/")
elcash_data<- elcash %>% #and then
html_nodes(".lead") %>%
html_text()
elcash_data[9]
stri_sub(elcash_data[9],2,4)
elcash_market_cap<-as.integer(stri_sub(elcash_data[9],2,4))*10e5
btcv <- read_html("https://explorer.bitcoinvault.global/")
btcv_data<- btcv %>% #and then
html_nodes(".lead") %>%
html_text()
#
# length(btcv_data)
#
#
# for (i in seq_len(length(btcv_data))){
# print(btcv_data[i])
# }
#
# for (i in 1:length(btcv_data)){
# print(btcv_data[i])
# }
#for (i in length(btcv_data){
for (i in 1:length(btcv_data)){
if(grepl("BTCV", btcv_data[i], fixed = TRUE)==TRUE){
pos<-i}
}
btcv_data[11]
stri_sub(btcv_data[11],2,4)
btcv_market_cap<-as.integer(stri_sub(btcv_data[11],2,4))*10e5
btcv_coins<-as.integer(stri_sub(btcv_data[10],1,2))*10e6 + as.integer(stri_sub(btcv_data[10],4,6))*10e3 + as.integer(stri_sub(btcv_data[10],8,10))
btcv_market_cap<-  250500000
elcash_market_cap<-166880000
#PULL top 100 to 200 from coinmarketcap
symbols<-all$symbol[101:200]
cap<- rep(0, length(symbols))
coins<- rep(0, length(symbols))
price<- rep(0, length(symbols))
rank<-rep(101:200)
marketcap<- data.frame(symbols, cap,coins,price,rank)
row<-1
#head(dataf[, (colnames(dataf) %in% c('Depr1', 'Depr2','Depr4', 'Depr7'))])
#sym<-get_crypto_quotes(symbol = "BTC")
for(i in symbols) {
#print(i)
try(sym<-get_crypto_quotes(symbol = i))
marketcap$coins[row]<-sym[, c(9)]
marketcap$price[row]<-sym[, c(16)]
#sym2<-sym[, c(9, 16)]
#marketcap$cap[row]<-sym$total_supply*sym$price
#marketcap$cap[row]<-sym[, c(9)]*sym[, c(16)]
#education[c(10:21),c(2,6:7)]
#marketcap[c(row),c(cap)]<-(marketcap$coins[row])*marketcap$price[row]
marketcap$cap[row]<-sym[, c(9)]*sym[, c(16)]
#marketcap$cap[row]<-prettyNum(sym[, c(9)]*sym[, c(16)],big.mark=",",scientific=FALSE)
Sys.sleep(2.5)
row<-row+1
}
btcv_market_cap<-as.integer(stri_sub(btcv_data[11],2,4))*10e5
elcash_market_cap<-as.integer(stri_sub(elcash_data[9],2,4))*10e5
#btcvv<-get_crypto_quotes(symbol = "BTCV")
#BTCV marketcap
#btcvv$market_cap<-btcvv$total_supply*btcvv$price
#prettyNum(btcvv$market_cap,big.mark=",",scientific=FALSE)
library(tidyverse)
library(XML)
library(rvest)
#install.packages("htmltools")
#install.packages("rvest")
#install.packages("stringi")
library(htmltools)
#library(rvest)
library(dplyr)
library(stringi)
#packageDescription("rvest")
#install.packages('xml2')
#library('xml2')
#lego_movie <- html("http://www.imdb.com/title/tt1490017/")
elcash <- read_html("https://explorer.electriccash.global/")
elcash_data<- elcash %>% #and then
html_nodes(".lead") %>%
html_text()
elcash_data[9]
stri_sub(elcash_data[9],2,4)
elcash_market_cap<-as.integer(stri_sub(elcash_data[9],2,4))*10e5
btcv <- read_html("https://explorer.bitcoinvault.global/")
btcv_data<- btcv %>% #and then
html_nodes(".lead") %>%
html_text()
#
# length(btcv_data)
#
#
# for (i in seq_len(length(btcv_data))){
# print(btcv_data[i])
# }
#
# for (i in 1:length(btcv_data)){
# print(btcv_data[i])
# }
#for (i in length(btcv_data){
for (i in 1:length(btcv_data)){
if(grepl("BTCV", btcv_data[i], fixed = TRUE)==TRUE){
pos<-i}
}
btcv_data[11]
stri_sub(btcv_data[11],2,4)
btcv_market_cap<-as.integer(stri_sub(btcv_data[11],2,4))*10e5
btcv_coins<-as.integer(stri_sub(btcv_data[10],1,2))*10e6 + as.integer(stri_sub(btcv_data[10],4,6))*10e3 + as.integer(stri_sub(btcv_data[10],8,10))
#btcv_market_cap<-  250500000
#elcash_market_cap<-166880000
#PULL top 100 to 200 from coinmarketcap
symbols<-all$symbol[101:200]
cap<- rep(0, length(symbols))
coins<- rep(0, length(symbols))
price<- rep(0, length(symbols))
rank<-rep(101:200)
marketcap<- data.frame(symbols, cap,coins,price,rank)
row<-1
#head(dataf[, (colnames(dataf) %in% c('Depr1', 'Depr2','Depr4', 'Depr7'))])
#sym<-get_crypto_quotes(symbol = "BTC")
for(i in symbols) {
#print(i)
try(sym<-get_crypto_quotes(symbol = i))
marketcap$coins[row]<-sym[, c(9)]
marketcap$price[row]<-sym[, c(16)]
#sym2<-sym[, c(9, 16)]
#marketcap$cap[row]<-sym$total_supply*sym$price
#marketcap$cap[row]<-sym[, c(9)]*sym[, c(16)]
#education[c(10:21),c(2,6:7)]
#marketcap[c(row),c(cap)]<-(marketcap$coins[row])*marketcap$price[row]
marketcap$cap[row]<-sym[, c(9)]*sym[, c(16)]
#marketcap$cap[row]<-prettyNum(sym[, c(9)]*sym[, c(16)],big.mark=",",scientific=FALSE)
Sys.sleep(2.5)
row<-row+1
}
rank_btcv<-0
rank_elcash<-0
#Loop to find the position in marketcap of both coins
for(row in 1:nrow(marketcap)) {
#print(marketcap$cap[row])
if(marketcap$cap[row]>btcv_market_cap){
rank_btcv<-rank_btcv+1}
if(marketcap$cap[row]>elcash_market_cap){
rank_elcash<-rank_elcash+1}
}
rank_btcv<-rank_btcv+101
rank_elcash<-rank_elcash+101
print(rank_btcv)
print(rank_elcash)
#https://github.com/amrrs/coinmarketcapr
#https://cran.r-project.org/web/packages/coinmarketcapr/coinmarketcapr.pdf
#install.packages("coinmarketcapr")
library(coinmarketcapr)
# install.packages("devtools")
#devtools::install_github("amrrs/coinmarketcapr")
key<-'515ee143-4929-4b57-8c9f-a033dd7e22ab'
coinmarketcapr::setup(key)
all<-get_crypto_map()
all<-all[order(all$rank),]
#btcvv<-get_crypto_quotes(symbol = "BTCV")
#BTCV marketcap
#btcvv$market_cap<-btcvv$total_supply*btcvv$price
#prettyNum(btcvv$market_cap,big.mark=",",scientific=FALSE)
library(tidyverse)
library(XML)
library(rvest)
#install.packages("htmltools")
#install.packages("rvest")
#install.packages("stringi")
library(htmltools)
#library(rvest)
library(dplyr)
library(stringi)
#packageDescription("rvest")
#install.packages('xml2')
#library('xml2')
#lego_movie <- html("http://www.imdb.com/title/tt1490017/")
elcash <- read_html("https://explorer.electriccash.global/")
elcash_data<- elcash %>% #and then
html_nodes(".lead") %>%
html_text()
elcash_data[9]
stri_sub(elcash_data[9],2,4)
elcash_market_cap<-as.integer(stri_sub(elcash_data[9],2,4))*10e5
btcv <- read_html("https://explorer.bitcoinvault.global/")
btcv_data<- btcv %>% #and then
html_nodes(".lead") %>%
html_text()
#
# length(btcv_data)
#
#
# for (i in seq_len(length(btcv_data))){
# print(btcv_data[i])
# }
#
# for (i in 1:length(btcv_data)){
# print(btcv_data[i])
# }
#for (i in length(btcv_data){
for (i in 1:length(btcv_data)){
if(grepl("BTCV", btcv_data[i], fixed = TRUE)==TRUE){
pos<-i}
}
btcv_data[11]
stri_sub(btcv_data[11],2,4)
btcv_market_cap<-as.integer(stri_sub(btcv_data[11],2,4))*10e5
btcv_coins<-as.integer(stri_sub(btcv_data[10],1,2))*10e6 + as.integer(stri_sub(btcv_data[10],4,6))*10e3 + as.integer(stri_sub(btcv_data[10],8,10))
#btcv_market_cap<-  250500000
#elcash_market_cap<-166880000
#PULL top 100 to 200 from coinmarketcap
symbols<-all$symbol[101:200]
cap<- rep(0, length(symbols))
coins<- rep(0, length(symbols))
price<- rep(0, length(symbols))
rank<-rep(101:200)
marketcap<- data.frame(symbols, cap,coins,price,rank)
row<-1
#head(dataf[, (colnames(dataf) %in% c('Depr1', 'Depr2','Depr4', 'Depr7'))])
#sym<-get_crypto_quotes(symbol = "BTC")
for(i in symbols) {
#print(i)
try(sym<-get_crypto_quotes(symbol = i))
marketcap$coins[row]<-sym[, c(9)]
marketcap$price[row]<-sym[, c(16)]
#sym2<-sym[, c(9, 16)]
#marketcap$cap[row]<-sym$total_supply*sym$price
#marketcap$cap[row]<-sym[, c(9)]*sym[, c(16)]
#education[c(10:21),c(2,6:7)]
#marketcap[c(row),c(cap)]<-(marketcap$coins[row])*marketcap$price[row]
marketcap$cap[row]<-sym[, c(9)]*sym[, c(16)]
#marketcap$cap[row]<-prettyNum(sym[, c(9)]*sym[, c(16)],big.mark=",",scientific=FALSE)
Sys.sleep(2.5)
row<-row+1
}
rank_btcv<-0
rank_elcash<-0
#Loop to find the position in marketcap of both coins
for(row in 1:nrow(marketcap)) {
#print(marketcap$cap[row])
if(marketcap$cap[row]>btcv_market_cap){
rank_btcv<-rank_btcv+1}
if(marketcap$cap[row]>elcash_market_cap){
rank_elcash<-rank_elcash+1}
}
rank_btcv<-rank_btcv+101
rank_elcash<-rank_elcash+101
print(rank_btcv)
print(rank_elcash)
rmarkdown::render('Index.Rmd',
output_file = paste('index',
'.html', sep=''))
rmarkdown::render('Index.Rmd',
output_file = paste('index',
'.html', sep=''))
#RPi
#Get the current wd as the directory of this file
wd<-dirname(rstudioapi::getActiveDocumentContext()$path)
setwd(wd)
#knitt the file on its current folder to test its view
rmarkdown::render('Linux_index.Rmd',
output_file = paste('index',
'.html', sep=''))
#RPi
#Get the current wd as the directory of this file
wd<-dirname(rstudioapi::getActiveDocumentContext()$path)
setwd(wd)
#knitt the file on its current folder to test its view
rmarkdown::render('Linux_index.Rmd',
output_file = paste('index',
'.html', sep=''))
#RPi
#Get the current wd as the directory of this file
wd<-dirname(rstudioapi::getActiveDocumentContext()$path)
setwd(wd)
#knitt the file on its current folder to test its view
rmarkdown::render('Linux_index.Rmd',
output_file = paste('index',
'.html', sep=''))
#RPi
#Get the current wd as the directory of this file
wd<-dirname(rstudioapi::getActiveDocumentContext()$path)
setwd(wd)
#knitt the file on its current folder to test its view
rmarkdown::render('Linux_index.Rmd',
output_file = paste('index',
'.html', sep=''))
#RPi
#Get the current wd as the directory of this file
wd<-dirname(rstudioapi::getActiveDocumentContext()$path)
setwd(wd)
#knitt the file on its current folder to test its view
rmarkdown::render('Linux_index.Rmd',
output_file = paste('index',
'.html', sep=''))
